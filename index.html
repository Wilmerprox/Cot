<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Cotizaci√≥n de Buffet y Catering</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            background-color: #4B0082; /* Fondo morado oscuro */
            color: #ffffff;
        }
        .container {
            background-color: #ffffff;
            color: #333;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            max-width: 600px; /* Ancho m√°ximo */
            margin: 50px auto; /* Centrado vertical y horizontal */
        }
        h2 {
            text-align: center;
            color: #FFA500; /* Naranja */
            margin-bottom: 20px;
        }
        h3 {
            color: #4B0082; /* T√≠tulos en morado oscuro */
            margin: 20px 0 10px;
        }
        label {
            font-weight: bold;
        }
        input[type="text"], input[type="number"], input[type="date"], input[type="time"] {
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        input[type="checkbox"] {
            transform: scale(1.5);
            margin-right: 10px;
        }
        button {
            background-color: #4B0082;
            color: #ffffff;
            transition: background-color 0.3s, transform 0.3s;
        }
        button:hover {
            background-color: #37176A;
            transform: translateY(-2px);
        }
        .hidden {
            display: none;
        }
        .tooltip-inner {
            background-color: #4B0082;
        }
        .preview {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #4B0082;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2><i class="fas fa-pencil-alt"></i> Cotizaci√≥n de Buffet y Catering</h2>
    
        <form id="cotizacionForm">
            <h3>üóìÔ∏è Paso 1: Informaci√≥n del Evento</h3>
            <div class="form-group">
                <label for="nombre">Nombre del Cliente:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" required placeholder="Ej: Juan P√©rez">
                <div class="invalid-feedback">Por favor, ingrese su nombre completo.</div>
            </div>
            <div class="form-group">
                <label for="fecha">üìÖ Fecha del Evento:</label>
                <input type="date" class="form-control" id="fecha" name="fecha" required min="" onchange="validarFecha()">
                <div class="invalid-feedback">Por favor, seleccione una fecha v√°lida.</div>
            </div>
            <div class="form-group">
                <label for="hora">‚è∞ Hora del Evento:</label>
                <input type="time" class="form-control" id="hora" name="hora" required step="900">
                <div class="invalid-feedback">Por favor, seleccione la hora del evento.</div>
            </div>
            <div class="form-group">
                <label for="lugar">üìç Lugar del Evento:</label>
                <input type="text" class="form-control" id="lugar" name="lugar" required placeholder="Ej: Restaurante ABC">
                <div class="invalid-feedback">Por favor, ingrese el lugar del evento.</div>
            </div>

            <h3>üë• Paso 2: Detalles de la Cotizaci√≥n</h3>
            <div class="form-group">
                <label for="personas">N√∫mero de Personas:</label>
                <input type="number" class="form-control" id="personas" name="personas" required onchange="calcularTotal()" placeholder="Ej: 50" min="1">
                <div class="invalid-feedback">Por favor, ingrese un n√∫mero de personas v√°lido.</div>
            </div>
            <div class="form-group">
                <label for="precioPorPersona">üí≤ Precio por Persona (S/):</label>
                <input type="number" class="form-control" id="precioPorPersona" name="precioPorPersona" onchange="calcularTotal()" placeholder="Ej: 50" min="1">
            </div>
            <button type="button" class="btn btn-primary" onclick="calcularTotal()">üíµ Calcular Precio Total</button>

            <div class="form-group">
                <label for="precioTotal">üí∞ Precio Total (S/):</label>
                <input type="text" class="form-control" id="precioTotal" name="precioTotal" readonly>
            </div>

            <h3>üçΩÔ∏è Paso 3: Selecci√≥n de Servicios</h3>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="mozos" onchange="toggleMozos()">
                <label class="form-check-label" for="mozos"> üë®‚Äçüç≥ Mozos</label>
            </div>
            <div id="mozosDetails" class="hidden">
                <div class="form-group">
                    <label for="cantidadMozos">Cantidad de Mozos:</label>
                    <input type="number" class="form-control" id="cantidadMozos" name="cantidadMozos" min="1">
                </div>
                <div class="form-group">
                    <label for="horasMozos">Horas requeridas:</label>
                    <input type="number" class="form-control" id="horasMozos" name="horasMozos" min="1">
                </div>
            </div>

            <h3>üçΩÔ∏è Vajilla:</h3>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="copas" onchange="toggleCantidad('copasCantidad')">
                <label class="form-check-label" for="copas"> Copas</label>
            </div>
            <div id="copasCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="vasos" onchange="toggleCantidad('vasosCantidad')">
                <label class="form-check-label" for="vasos"> Vasos</label>
            </div>
            <div id="vasosCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="platosEntrada" onchange="toggleCantidad('platosEntradaCantidad')">
                <label class="form-check-label" for="platosEntrada"> Platos de Entrada</label>
            </div>
            <div id="platosEntradaCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="platosBase" onchange="toggleCantidad('platosBaseCantidad')">
                <label class="form-check-label" for="platosBase"> Platos de Base</label>
            </div>
            <div id="platosBaseCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="servilletas" onchange="toggleCantidad('servilletasCantidad')">
                <label class="form-check-label" for="servilletas"> Servilletas de Tela</label>
            </div>
            <div id="servilletasCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
                <label>Color de la Servilleta:</label>
                <input type="text" class="form-control" placeholder="Color"><br>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="jarras" onchange="toggleCantidad('jarrasCantidad')">
                <label class="form-check-label" for="jarras"> Jarras</label>
            </div>
            <div id="jarrasCantidad" class="hidden">
                <label>Cantidad:</label>
                <input type="number" class="form-control" placeholder="Cantidad" min="1"><br>
            </div>

            <h3>üçΩÔ∏è Comida:</h3>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="comida" onchange="toggleComida()">
                <label class="form-check-label" for="comida"> Comida</label>
            </div>
            <div id="comidaDetails" class="hidden">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="entrada" onchange="toggleEntrada()">
                    <label class="form-check-label" for="entrada"> Entrada</label>
                </div>
                <div id="entradaDetails" class="hidden">
                    <label for="nombreEntrada">Nombre del Plato:</label>
                    <input type="text" class="form-control" id="nombreEntrada" name="nombreEntrada" placeholder="Ej: Ensalada C√©sar">
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="segundoPlato" onchange="togglePlato()">
                    <label class="form-check-label" for="segundoPlato"> Segundo Plato</label>
                </div>
                <div id="segundoPlatoDetails" class="hidden">
                    <label for="nombreSegundoPlato">Nombre del Plato:</label>
                    <input type="text" class="form-control" id="nombreSegundoPlato" name="nombreSegundoPlato" placeholder="Ej: Pollo a la Brasa">
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="postre" onchange="togglePostre()">
                    <label class="form-check-label" for="postre"> Postre</label>
                </div>
                <div id="postreDetails" class="hidden">
                    <label for="nombrePostre">Nombre del Postre:</label>
                    <input type="text" class="form-control" id="nombrePostre" name="nombrePostre" placeholder="Ej: Tarta de Chocolate">
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="brindis" onchange="toggleBrindis()">
                    <label class="form-check-label" for="brindis"> Brindis</label>
                </div>
                <div id="brindisDetails" class="hidden">
                    <label for="nombreBrindis">Nombre del C√≥ctel:</label>
                    <input type="text" class="form-control" id="nombreBrindis" name="nombreBrindis" placeholder="Ej: Sangr√≠a">
                </div>
            </div>

            <h3>ü•™ Bocaditos:</h3>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="bocaditos" onchange="toggleBocaditos()">
                <label class="form-check-label" for="bocaditos"> Bocaditos</label>
            </div>
            <div id="bocaditosDetails" class="hidden">
                <div class="form-group">
                    <label for="cantidadTiposBocaditos">Cantidad de Tipos de Bocaditos:</label>
                    <input type="number" class="form-control" id="cantidadTiposBocaditos" name="cantidadTiposBocaditos" min="1" onchange="generarCamposBocaditos()">
                </div>
                <button type="button" class="btn btn-secondary" onclick="generarCamposBocaditos()">Agregar Bocaditos</button>
                <div id="bocaditosGroup" class="bocaditos-group"></div>
            </div>
            
            <button type="button" class="btn btn-success" onclick="generarCotizacion()">Generar Cotizaci√≥n</button>

            <div id="preview" class="preview hidden">
                <h3>Vista Previa de la Cotizaci√≥n</h3>
                <pre id="cotizacionTexto"></pre>
                <button type="button" class="btn btn-info" onclick="copiarCotizacion()">üìã Copiar Cotizaci√≥n</button>
            </div>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('fecha').setAttribute('min', today);

        function toggleMozos() {
            const mozosDetails = document.getElementById('mozosDetails');
            mozosDetails.classList.toggle('hidden', !document.getElementById('mozos').checked);
        }

        function toggleCantidad(cantidadId) {
            const cantidadDiv = document.getElementById(cantidadId);
            cantidadDiv.classList.toggle('hidden', !document.getElementById(cantidadId.replace('Cantidad', '')).checked);
        }

        function toggleComida() {
            const comidaDetails = document.getElementById('comidaDetails');
            comidaDetails.classList.toggle('hidden', !document.getElementById('comida').checked);
        }

        function toggleEntrada() {
            const entradaDetails = document.getElementById('entradaDetails');
            entradaDetails.classList.toggle('hidden', !document.getElementById('entrada').checked);
        }

        function togglePlato() {
            const platoDetails = document.getElementById('segundoPlatoDetails');
            platoDetails.classList.toggle('hidden', !document.getElementById('segundoPlato').checked);
        }

        function togglePostre() {
            const postreDetails = document.getElementById('postreDetails');
            postreDetails.classList.toggle('hidden', !document.getElementById('postre').checked);
        }

        function toggleBrindis() {
            const brindisDetails = document.getElementById('brindisDetails');
            brindisDetails.classList.toggle('hidden', !document.getElementById('brindis').checked);
        }

        function toggleBocaditos() {
            const bocaditosDetails = document.getElementById('bocaditosDetails');
            bocaditosDetails.classList.toggle('hidden', !document.getElementById('bocaditos').checked);
        }

        function generarCamposBocaditos() {
            const cantidadTipos = document.getElementById('cantidadTiposBocaditos').value;
            const bocaditosGroup = document.getElementById('bocaditosGroup');
            bocaditosGroup.innerHTML = ''; // Limpiar campos anteriores

            for (let i = 1; i <= cantidadTipos; i++) {
                // Crear campos para nombre y cantidad de bocaditos
                const bocaditoDiv = document.createElement('div');
                bocaditoDiv.innerHTML = `
                    <label for="bocadito${i}">Bocadito ${i}:</label>
                    <input type="number" class="form-control" id="bocaditoCantidad${i}" placeholder="Cantidad de bocaditos" required min="1"><br>
                    <input type="text" class="form-control" id="bocaditoNombre${i}" placeholder="Nombre del bocadito" required><br>
                `;
                bocaditosGroup.appendChild(bocaditoDiv);
            }
        }

        function calcularTotal() {
            const personas = document.getElementById('personas').value;
            const precioPorPersona = document.getElementById('precioPorPersona').value;

            // Validar campos antes de calcular
            if (!personas || !precioPorPersona) {
                alert("Por favor, complete los campos de N√∫mero de Personas y Precio por Persona.");
                return;
            }

            const precioTotal = personas * precioPorPersona;
            document.getElementById('precioTotal').value = precioTotal || 0;
        }

        function validarFecha() {
            const fechaInput = document.getElementById('fecha');
            const fechaSeleccionada = new Date(fechaInput.value);
            const fechaActual = new Date();
            if (fechaSeleccionada < fechaActual) {
                alert("La fecha seleccionada no puede ser anterior a la fecha actual.");
                fechaInput.value = "";
            }
        }

        function generarCotizacion() {
            const nombre = document.getElementById('nombre').value;
            const fecha = document.getElementById('fecha').value;
            const hora = document.getElementById('hora').value;
            const lugar = document.getElementById('lugar').value;
            const personas = document.getElementById('personas').value;
            const precioPorPersona = document.getElementById('precioPorPersona').value;
            const precioTotal = document.getElementById('precioTotal').value;

            // Validaciones
            if (!nombre) {
                alert("Por favor, ingrese el nombre del cliente.");
                return;
            }
            if (!fecha) {
                alert("Por favor, seleccione la fecha del evento.");
                return;
            }
            if (!hora) {
                alert("Por favor, seleccione la hora del evento.");
                return;
            }
            if (!lugar) {
                alert("Por favor, ingrese el lugar del evento.");
                return;
            }
            if (!personas) {
                alert("Por favor, ingrese el n√∫mero de personas.");
                return;
            }
            if (!precioPorPersona) {
                alert("Por favor, ingrese el precio por persona.");
                return;
            }

            const adelanto = (precioTotal * 0.6).toFixed(2);
            const restante = (precioTotal - adelanto).toFixed(2);

            let mensaje = `Cotizaci√≥n para ${nombre}:\n\n`;
            mensaje += `üìÖ Fecha del evento: ${fecha}\n`;
            mensaje += `‚è∞ Hora del evento: ${hora}\n`;
            mensaje += `üìç Lugar del evento: ${lugar}\n`;
            mensaje += `N√∫mero de personas: ${personas}\n`;
            mensaje += `üí≤ Precio por persona: S/${precioPorPersona}\n`;
            mensaje += `üí∞ Costo total: S/${precioTotal}\n\n`;
            mensaje += `Servicios solicitados:\n`;

            if (document.getElementById('mozos').checked) {
                const cantidadMozos = document.getElementById('cantidadMozos').value;
                const horasMozos = document.getElementById('horasMozos').value;
                mensaje += `üë®‚Äçüç≥ Mozos: ${cantidadMozos} por ${horasMozos} horas.\n`;
            }

            if (document.getElementById('entrada').checked) {
                const nombreEntrada = document.getElementById('nombreEntrada').value;
                mensaje += `üçΩÔ∏è Entrada: ${nombreEntrada}.\n`;
            }

            if (document.getElementById('segundoPlato').checked) {
                const nombreSegundoPlato = document.getElementById('nombreSegundoPlato').value;
                mensaje += `üçΩÔ∏è Segundo Plato: ${nombreSegundoPlato}.\n`;
            }

            if (document.getElementById('postre').checked) {
                const nombrePostre = document.getElementById('nombrePostre').value;
                mensaje += `üç∞ Postre: ${nombrePostre}.\n`;
            }

            if (document.getElementById('brindis').checked) {
                const nombreBrindis = document.getElementById('nombreBrindis').value;
                mensaje += `üç∏ Brindis con: ${nombreBrindis}.\n`;
            }

            if (document.getElementById('copas').checked) {
                const cantidadCopas = document.getElementById('copasCantidad').querySelector('input').value;
                mensaje += `- ${cantidadCopas} Copas.\n`;
            }
            if (document.getElementById('vasos').checked) {
                const cantidadVasos = document.getElementById('vasosCantidad').querySelector('input').value;
                mensaje += `- ${cantidadVasos} Vasos.\n`;
            }
            if (document.getElementById('platosEntrada').checked) {
                const cantidadPlatosEntrada = document.getElementById('platosEntradaCantidad').querySelector('input').value;
                mensaje += `- ${cantidadPlatosEntrada} Platos de Entrada.\n`;
            }
            if (document.getElementById('platosBase').checked) {
                const cantidadPlatosBase = document.getElementById('platosBaseCantidad').querySelector('input').value;
                mensaje += `- ${cantidadPlatosBase} Platos Base.\n`;
            }
            if (document.getElementById('servilletas').checked) {
                const cantidadServilletas = document.getElementById('servilletasCantidad').querySelector('input').value;
                const colorServilletas = document.getElementById('servilletasCantidad').querySelector('input[type="text"]').value;
                mensaje += `- ${cantidadServilletas} Servilletas de Tela (Color: ${colorServilletas}).\n`;
            }
            if (document.getElementById('jarras').checked) {
                const cantidadJarras = document.getElementById('jarrasCantidad').querySelector('input').value;
                mensaje += `- ${cantidadJarras} Jarras.\n`;
            }

            if (document.getElementById('bocaditos').checked) {
                mensaje += `üç¢ Bocaditos:\n`;
                const cantidadTipos = document.getElementById('cantidadTiposBocaditos').value;
                for (let i = 1; i <= cantidadTipos; i++) {
                    const cantidad = document.getElementById(`bocaditoCantidad${i}`).value;
                    const nombre = document.getElementById(`bocaditoNombre${i}`).value;
                    mensaje += `- ${cantidad} ${nombre}\n`;
                }
            }

            mensaje += `\nüíµ Para reservar tu fecha, debes adelantar el 60%: S/${adelanto}\n`;
            mensaje += `üîî El restante (S/${restante}) se cancela el d√≠a del evento.\n`;
            mensaje += `‚ú® Puedes realizar el adelanto mediante Yape al 972480092. ¬°Gracias por tu confianza!\n\n`;

            // Mostrar vista previa
            const previewDiv = document.getElementById('preview');
            const cotizacionTexto = document.getElementById('cotizacionTexto');
            cotizacionTexto.innerText = mensaje;
            previewDiv.classList.remove('hidden'); // Mostrar vista previa
        }

        function copiarCotizacion() {
            const cotizacionTexto = document.getElementById('cotizacionTexto').innerText;
            navigator.clipboard.writeText(cotizacionTexto).then(() => {
                alert("¬°Cotizaci√≥n copiada al portapapeles! Ahora puedes pegarla en WhatsApp.");
            });
        }
    </script>
</body>
</html>
